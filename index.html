<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Kasturi Divine | Phone Number Numerology</title>
  <meta name="description" content="Check your phone number numerology using your date of birth (calendar) and mobile number. Lucky, Partially Lucky, or Unlucky based on friendly numbers." />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Poppins:wght@600;800&display=swap" rel="stylesheet">
  <link rel="icon" type="image/png" href="LOGO.png" />
  <style>
    :root{
      --bg:#0f172a; --card:#111827; --muted:#94a3b8; --text:#e5e7eb;
      --brand:#16a34a; --brand-2:#22c55e; --danger:#ef4444; --amber:#f59e0b;
      --ring:0 0 0 6px color-mix(in srgb, var(--brand) 25%, transparent);
      --radius:18px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; color:var(--text);
      background: radial-gradient(1200px 600px at 20% -10%, #1f2937, transparent),
                  radial-gradient(900px 400px at 80% 110%, #1e3a8a33, transparent),
                  var(--bg);
      font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Noto Sans, Arial;
    }
    a{color:#93c5fd;text-decoration:none}
    a:hover{text-decoration:underline}
    .wrap{max-width:980px;margin:40px auto;padding:0 20px}
    header{display:flex;align-items:center;gap:16px;margin-bottom:24px}
    .brand{display:flex;align-items:center;gap:14px}
    .logo{
      width:56px;height:56px;border-radius:16px;background:#0b1220;display:grid;place-items:center;
      overflow:hidden;border:1px solid #334155;
      box-shadow:0 10px 30px #0008,inset 0 1px 0 #ffffff10;
    }
    .logo img{width:100%;height:100%;object-fit:cover}
    h1{font-family:Poppins, Inter, system-ui; font-size:clamp(22px,4vw,34px);margin:0}
    .sub{color:var(--muted);font-size:14px}

    .card{background:linear-gradient(180deg,#0b1220,#0b1220f2);border:1px solid #33415580;border-radius:var(--radius);box-shadow:0 10px 30px #0008,inset 0 1px 0 #ffffff10;padding:22px}
    form{display:grid;grid-template-columns:1fr 1fr 1fr auto;gap:12px;align-items:end}
    label{font-size:12px;color:var(--muted);display:block;margin-bottom:6px}
    input[type="text"],input[type="date"],input[type="tel"]{
      width:100%;padding:14px;border-radius:12px;border:1px solid #334155;background:#0b1220;color:var(--text);
      outline:none;transition:box-shadow .2s,border-color .2s
    }
    input:focus{box-shadow:var(--ring);border-color:var(--brand)}
    button{
      padding:14px 18px;border-radius:14px;border:0;background:linear-gradient(135deg,var(--brand),var(--brand-2));color:#052e16;
      font-weight:700;cursor:pointer;box-shadow:0 12px 24px #22c55e40;white-space:nowrap
    }
    .ghost{background:#0b1220;border:1px solid #334155;color:var(--text)}
    .rowBtns{display:flex;gap:10px;flex-wrap:wrap}
    button:hover{transform:translateY(-1px)} button:active{transform:translateY(0)}

    .result{margin-top:18px;display:none}
    .hello{font-weight:700;font-size:20px;margin:8px 0 14px}
    .grid{display:grid;grid-template-columns:1.4fr .6fr;gap:16px}
    .stat{padding:16px;border-radius:16px;background:#0b1220;border:1px solid #334155}
    .mono{font-family:ui-monospace, SFMono-Regular, Menlo, Consolas, "Courier New", monospace}
    .title{font-family:Poppins, Inter; font-weight:800; letter-spacing:.3px; margin:0 0 6px}
    .pill{display:inline-block;padding:6px 12px;border-radius:999px;font-size:12px;margin:0 8px 8px 0;border:1px solid #334155;color:var(--muted)}
    .good{border-color:#14532d;background:linear-gradient(180deg,#052e16,#052e16)} .good .title{color:#86efac}
    .mid{border-color:#78350f;background:linear-gradient(180deg,#1a1307,#1a1307)} .mid .title{color:#fcd34d}
    .bad{border-color:#7f1d1d;background:linear-gradient(180deg,#180b0b,#180b0b)} .bad .title{color:#fca5a5}

    .footer{margin-top:28px;color:#93c5fd;font-size:13px;text-align:center;opacity:.9}
    .footer .links{display:flex;gap:16px;justify-content:center;flex-wrap:wrap;margin-top:6px}
    @media (max-width: 900px){form{grid-template-columns:1fr 1fr} .grid{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"><img src="logo.png" alt="Kasturi Divine logo"></div>
        <div>
          <h1>Check Your Phone Number Numerology</h1>
          <div class="sub">Enter your Name, Date of Birth (calendar), and Phone Number to see if it is Lucky, Partially Lucky, or Unlucky.</div>
        </div>
      </div>
    </header>

    <section class="card" aria-labelledby="formTitle">
      <h2 id="formTitle" style="position:absolute;left:-9999px">Numerology Form</h2>
      <form id="numForm">
        <div>
          <label for="name">Name</label>
          <input id="name" name="name" type="text" placeholder="Your name" autocomplete="name" required />
        </div>
        <div>
          <label for="dob">Date of Birth</label>
          <input id="dob" name="dob" type="date" required />
        </div>
        <div>
          <label for="phone">Phone Number</label>
          <input id="phone" name="phone" type="tel" inputmode="numeric" placeholder="e.g. 9300594567" required />
        </div>
        <div class="rowBtns">
          <button type="submit" id="goBtn">Get Lucky Number</button>
          <button type="button" id="resetBtn" class="ghost" title="Keep Name & DOB, clear only Phone">Try another number</button>
        </div>
      </form>

      <div class="result" id="result">
        <div class="hello" id="hello"></div>
        <div class="grid">
          <div class="stat" id="breakdownBox">
            <p class="title">Number Breakdown</p>
            <p class="mono" id="breakdown"></p>
            <p class="mono" id="breakdown2"></p>
            <p class="mono" id="friendInfo"></p>
          </div>
          <div class="stat" id="summaryBox">
            <p class="title">Summary</p>
            <div class="pill" id="personality"></div>
            <div class="pill" id="phoneRoot"></div>
            <div style="margin-top:10px" id="verdict"></div>
            <div class="rowBtns" style="margin-top:12px">
              <a id="waShare" class="ghost" href="#" target="_blank" rel="noopener">
                <button type="button" class="ghost">Share on WhatsApp</button>
              </a>
              <a id="waChat" class="ghost" href="https://wa.me/919300594567" target="_blank" rel="noopener">
                <button type="button" class="ghost">Chat on WhatsApp</button>
              </a>
            </div>
          </div>
        </div>
      </div>
    </section>

    <footer class="footer">
      <div>© <span id="yr"></span> Kasturi Divine</div>
      <div class="links">
        <span>Contact: Mrs. Neitu Chaudhary — <a href="tel:+919354370946">+91 93543 70946</a> • <a href="https://wa.me/919354370946" target="_blank" rel="noopener">WhatsApp</a></span>
        <span>•</span>
        <a href="#privacy">Privacy</a>
      </div>
    </footer>

    <!-- Simple Privacy anchor/section -->
    <section id="privacy" class="card" style="margin-top:14px">
      <h3 class="title">Privacy</h3>
      <p style="margin:8px 0;color:#cbd5e1">
        We don’t store your name, date of birth, or phone number on our servers. Calculations happen in your browser only.
      </p>
    </section>
  </div>

<script>
// ---------- Helpers ----------
function onlyDigits(str){ return (str.match(/\d/g)||[]).join(''); }

// Use last 10 digits for numerology (ignore country code if present)
function normalizePhoneForCalc(raw){
  const d = onlyDigits(raw);
  if(d.length >= 10) return d.slice(-10);
  return d; // <10 -> will be blocked by validation
}

function digitalRootWithSteps(numStr){
  const digits = (numStr.match(/\d/g) || []).map(Number);
  const line = digits.join(" + ");
  const total = digits.reduce((a,b)=>a+b,0);
  function root(n){ while(n>9){ n = n.toString().split("").reduce((a,b)=>a+Number(b),0); } return n; }
  const dr = root(total);
  return {digits, line, total, root: dr};
}
function psychicFromDOB(dateStr){
  if(!dateStr) return null;
  const d = new Date(dateStr);        // <input type="date"> gives YYYY-MM-DD value
  if (isNaN(d)) return null;
  const day = d.getDate();
  const sum = day.toString().split("").reduce((a,b)=>a+Number(b),0);
  return sum > 9 ? sum.toString().split("").reduce((a,b)=>a+Number(b),0) : sum;
}

// Friendly numbers map
const friendlyMap = {
  1:[1,2,4,7],
  2:[1,2,7],
  3:[3,6,9],
  4:[1,5,6],     // as you wanted
  5:[1,5,6],
  6:[3,5,6,9],
  7:[1,2,7],
  8:[1,3,5,6,8],
  9:[3,6,9]
};
function isFriendly(personality, phoneRoot){
  const list = friendlyMap[Number(personality)] || [];
  return list.includes(Number(phoneRoot));
}

// ---------- DOM ----------
const form       = document.getElementById('numForm');
const hello      = document.getElementById('hello');
const resultBox  = document.getElementById('result');
const breakdown  = document.getElementById('breakdown');
const breakdown2 = document.getElementById('breakdown2');
const friendInfo = document.getElementById('friendInfo');
const personality= document.getElementById('personality');
const phoneRoot  = document.getElementById('phoneRoot');
const verdict    = document.getElementById('verdict');
const summaryBox = document.getElementById('summaryBox');
const yr         = document.getElementById('yr');
const waShare    = document.getElementById('waShare');
const phoneInput = document.getElementById('phone');
const resetBtn   = document.getElementById('resetBtn');
yr.textContent = new Date().getFullYear();

// Main calculate
function calculate(){
  const name = (document.getElementById('name').value || '').trim() || 'Friend';
  const dob  = document.getElementById('dob').value;
  const raw  = phoneInput.value;
  // Allow +91, spaces, hyphens; we normalize
  const digitsOnly = onlyDigits(raw);

  if(digitsOnly.length < 10){
    // keep quiet while typing; show alert only on submit
    return false;
  }
  const forCalc = normalizePhoneForCalc(raw); // last 10 digits
  const psychic = psychicFromDOB(dob);
  if(psychic==null){ return false; }

  const step = digitalRootWithSteps(forCalc);

  hello.textContent = `🌟 Welcome, ${name}!`;
  breakdown.innerHTML = `${step.line} = <strong>${step.total}</strong>`;
  const step2 = step.total.toString().split("").join(" + ");
  const step2sum = step.total.toString().split("").reduce((a,b)=>a+Number(b),0);
  breakdown2.innerHTML = `${step2} = ${step2sum} → <strong>${step.root}</strong>`;

  const friends = friendlyMap[psychic] || [];
  friendInfo.textContent = `Friendly numbers for Personality ${psychic}: [ ${friends.join(", ")} ]`;

  personality.textContent = `Personality Number: ${psychic}`;
  phoneRoot.textContent   = `Phone Root: ${step.root}`;

  let cls = 'bad';
  let msg = 'Your phone number is UNLUCKY.';
  if (psychic === step.root){
    cls = 'good'; msg = 'Your phone number is LUCKY! (Personality and Phone Root match)';
  } else if (isFriendly(psychic, step.root)){
    cls = 'mid'; msg = 'Your phone number is PARTIALLY LUCKY. (Friendly with your Personality Number)';
  }
  summaryBox.classList.remove('good','mid','bad');
  summaryBox.classList.add(cls);
  verdict.textContent = msg;

  // Share text (avoid replaceAll for older browsers)
  const shareMsg = 
    `Kasturi Divine – Numerology Result%0A` +
    `Name: ${encodeURIComponent(name)}%0A` +
    `DOB: ${encodeURIComponent(dob)}%0A` +
    `Phone (last 10 used): ${encodeURIComponent(forCalc)}%0A` +
    `Personality: ${psychic}%0A` +
    `Phone Root: ${step.root}%0A` +
    `Friendly with Personality: [${friends.join(', ')}]%0A` +
    `Verdict: ${encodeURIComponent(msg)}%0A%0A` +
    `Chat with us: wa.me/919300594567`;
  waShare.href = `https://wa.me/?text=${shareMsg}`;

  resultBox.style.display = 'block';
  return true;
}

// Submit -> validate & calculate
form.addEventListener('submit', (e)=>{
  e.preventDefault();
  const digitsOnly = onlyDigits(phoneInput.value);
  if(digitsOnly.length < 10){
    alert('Please enter a valid phone number (at least 10 digits).');
    return;
  }
  if(!document.getElementById('dob').value){
    alert('Please choose your Date of Birth.');
    return;
  }
  calculate();
});

// Auto-calc when 10 digits reached (user experience)
phoneInput.addEventListener('input', ()=>{
  // Keep only digits, +, spaces, hyphens visually okay—no forced mask
  const digitsOnly = onlyDigits(phoneInput.value);
  if(digitsOnly.length >= 10){
    calculate();
  } else {
    resultBox.style.display = 'none';
  }
});

// Try another number — keep Name & DOB
if (resetBtn){
  resetBtn.addEventListener('click', ()=>{
    phoneInput.value = '';
    resultBox.style.display = 'none';
    phoneInput.focus();
  });
}

// Prefill neutral date for convenience
(function init(){
  const d = document.getElementById('dob');
  if(!d.value) d.valueAsDate = new Date('1985-01-01');
})();
</script>

</body>
</html>
